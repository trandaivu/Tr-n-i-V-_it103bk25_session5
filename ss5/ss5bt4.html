<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      let booksId = [];
      let booksName = [];
      let bookStatus = [];

      let n = +prompt("Có bao nhiêu cuốn sách cần kiểm tra tình trạng hôm nay? ");

      for (let i = 1; i <= n; i++) {
        let id = prompt("Nhập mã sách (không để trống): ");
        while (id === "" || id === null) {
          id = prompt("Nhập mã sách (không để trống): ");
        }

        let name = prompt("Nhập tên sách (không để trống): ");
        while (name === "" || name === null) {
          name = prompt("Nhập tên sách (không để trống): ");
        }

        let choice = +prompt(
          "Nhập tình trạng ban đầu (1-3):\n1 → Hỏng nhẹ\n2 → Hỏng nặng\n3 → Cần sửa gấp",
        );

        let status = "";
        if (choice === 1) status = "Hỏng nhẹ";
        if (choice === 2) status = "Hỏng nặng";
        if (choice === 3) status = "Cần sửa gấp";

        booksId.push(id);
        booksName.push(name);
        bookStatus.push(status);
      }

      console.log("=== DANH SÁCH BAN ĐẦU ===");
      for (let i = 0; i < booksId.length; i++) {
        console.log(`${booksId[i]} - ${booksName[i]} - ${bookStatus[i]}`);
      }

      let option;
      do {
        option = +prompt(
          "Bạn muốn làm gì?\n1: Sửa tình trạng một cuốn sách\n2: Loại bỏ (xóa) một cuốn sách khỏi danh sách\n0: Kết thúc và in báo cáo cuối",
        );

        if (option === 1) {
          let editId = prompt("Nhập mã sách cần sửa: ");
          let found = -1;

          for (let i = 0; i < booksId.length; i++) {
            if (booksId[i] === editId) {
              found = i;
              break;
            }
          }

          if (found !== -1) {
            let newChoice = +prompt(
              "Chọn tình trạng mới (1-5):\n1: Hỏng nhẹ\n2: Hỏng nặng\n3: Cần sửa gấp\n4: Đã sửa xong\n5: Loại bỏ",
            );

            if (newChoice === 1) bookStatus[found] = "Hỏng nhẹ";
            if (newChoice === 2) bookStatus[found] = "Hỏng nặng";
            if (newChoice === 3) bookStatus[found] = "Cần sửa gấp";
            if (newChoice === 4) bookStatus[found] = "Đã sửa xong";
            if (newChoice === 5) bookStatus[found] = "Loại bỏ";
          }

          console.log("=== DANH SÁCH HIỆN TẠI ===");
          for (let i = 0; i < booksId.length; i++) {
            console.log(`${booksId[i]} - ${booksName[i]} - ${bookStatus[i]}`);
          }
        }

        if (option === 2) {
          let deleteId = prompt("Nhập mã sách cần xóa: ");
          let deleteIndex = -1;

          for (let i = 0; i < booksId.length; i++) {
            if (booksId[i] === deleteId) {
              deleteIndex = i;
              break;
            }
          }

          if (deleteIndex !== -1) {
            booksId.splice(deleteIndex, 1);
            booksName.splice(deleteIndex, 1);
            bookStatus.splice(deleteIndex, 1);
          }

          console.log("=== DANH SÁCH HIỆN TẠI ===");
          for (let i = 0; i < booksId.length; i++) {
            console.log(`${booksId[i]} - ${booksName[i]} - ${bookStatus[i]}`);
          }
        }
      } while (option !== 0);

      console.log("=== BÁO CÁO CUỐI ===");
      console.log("Tổng số sách còn lại: " + booksId.length);

      let fixedCount = 0;
      let removedCount = 0;

      for (let i = 0; i < bookStatus.length; i++) {
        if (bookStatus[i] === "Đã sửa xong") fixedCount++;
        if (bookStatus[i] === "Loại bỏ") removedCount++;
      }

      console.log('Số sách đã "Đã sửa xong": ' + fixedCount);
      console.log('Số sách "Loại bỏ": ' + removedCount);

      console.log("Danh sách các sách còn lại (nếu có):");
      if (booksId.length === 0) {
        console.log("Không còn sách nào.");
      } else {
        for (let i = 0; i < booksId.length; i++) {
          console.log(`${booksId[i]} - ${booksName[i]} - ${bookStatus[i]}`);
        }
      }
    </script>
  </body>
</html>
